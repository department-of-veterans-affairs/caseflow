import { useState } from "react";
import { Meta, Story, Preview, Props } from "@storybook/addon-docs/blocks";
import { action } from "@storybook/addon-actions";
import { select } from "@storybook/addon-knobs";

import { Timezone } from "./Timezone";
import { timezones } from "../../utils";
import HEARING_TIME_OPTIONS from "../../../../constants/HEARING_TIME_OPTIONS";
import { COMMON_TIMEZONES } from "../../../constants/AppConstants";

export const defaultProps = {};
const defaultRoTimezone = 'America/New_York'

<Meta
  title="Hearings/Components/Virtual Hearings/Timezone"
  component={Timezone}
/>

# Default

<Preview>
  <Story name="Default">
    {() => {
      const [value, setValue] = useState("");
      return (
        <div style={{ width: 500 }}>
          <Timezone
            time={select(
              "Time",
              HEARING_TIME_OPTIONS.map((opt) => opt.value),
              "08:30"
            )}
            roTimezone={defaultRoTimezone}
            value={value}
            onChange={setValue}
          />
        </div>
      );
    }}
  </Story>
</Preview>

### Disabled

<Preview>
  <Story name="Disabled">
    {() => {
      const [value, setValue] = useState("");
      return (
        <div style={{ width: 500 }}>
          <Timezone
            readOnly
            time={select(
              "Time",
              HEARING_TIME_OPTIONS.map((opt) => opt.value),
              "08:30"
            )}
            roTimezone={defaultRoTimezone}
            value={value}
            onChange={setValue}
          />
        </div>
      );
    }}
  </Story>
</Preview>

### With Errors

<Preview>
  <Story name="With Errors">
    {() => {
      const [value, setValue] = useState("");
      return (
        <div style={{ width: 500 }}>
          <Timezone
            errorMessage="Invalid timezone selected"
            time={select(
              "Time",
              HEARING_TIME_OPTIONS.map((opt) => opt.value),
              "08:30"
            )}
            roTimezone={defaultRoTimezone}
            value={value}
            onChange={setValue}
          />
        </div>
      );
    }}
  </Story>
</Preview>

### With Pre-Selected Option

<Preview>
  <Story name="With Pre-Selected Option">
    {() => {
      const [value, setValue] = useState(COMMON_TIMEZONES[0]);
      return (
        <div style={{ width: 500 }}>
          <Timezone
            time={select(
              "Time",
              HEARING_TIME_OPTIONS.map((opt) => opt.value),
              "08:30"
            )}
            roTimezone={defaultRoTimezone}
            value={value}
            onChange={setValue}
          />
        </div>
      );
    }}
  </Story>
</Preview>

<Props of={Timezone} />

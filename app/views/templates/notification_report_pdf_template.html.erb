<%= render "layouts/head" %>

<% appeal = Appeal.first %>
<% appeal_type = get_appeal_type(appeal) %>
<% veteran_first_name = appeal.veteran_first_name %>
<% veteran_last_name = appeal.veteran_last_name %>
<% file_number = appeal.veteran_file_number %>
<% docket_number = appeal.docket_number %>
<% docket_type = appeal.docket_name %>
<% docket_label = docket_type.first.upcase%>
<% appeal_stream_type = appeal.type %>
<% hearing_type = get_hearing_type(appeal) %>

<%
def get_appeal_type(appeal)
  if appeal.uuid.exists?
    appeal_type = "AMA Appeal"
  else
    appeal_type = "Legacy Appeal"
  end
end
%>

<%
def get_hearing_type(appeal)
  if appeal.current_hearing_request_type == nil
    hearing_type = nil
  else
    hearing_type = readable_current_hearing_request_type
  end
end
%>

<%
def get_notifications(appeal, appeal_type)
  if appeal_type = "AMA Appeal"
    notifications = appeal.fetch_notification_list
  else
    notifications = Notification.where(appeals_id: appeal.vacols_id)
  end
end
%>

<%# NOTIFICATIONS
if appeal = AMA appeal > notifications = appeal.fetch_notification_list
if appeal = legacy appeal > notifications = Notification.where(appeals_id: appeal.vacols_id)
map through array of notifications %>
event type = notification.event_type
notification date = notification.event_date

notification type = notification.notification_type
IF NOTIFICATION EVENT TYPE = Email and SMS

create two lines in the table one for sms and one for email

IF NOTIFICATION EVENT TYPE = EMAIL
---------------------------
EMAIL
notification type email = Email
recipient information email = notification.recipient_email
status = notification.email_notification.status
notification content email = notification.email_notification_content

IF NOTIFICATION EVENT TYPE = SMS
----------------------------
SMS
notification type SMS = Text
recipient information SMS = notification.recipient_phone_number
status = notification.sms_notification_status
notification content = notification.sms_notification_content

<html>
  <body class="cf-app-queue">
    <div class="cf-content">
      <div class="cf-content-inside full-page"></div>
    </div>
    <div id="Queue-react-component-328b930a-dffe-4c42-b850-ac07c64ab413">
      <div>
        <main data-css-35ly83="" role="main" id="Main">
          <div class="cf-wide-app">
            <div class="cf-flash-messages"></div>
            <div class="usa-grid">
              <section class="cf-app-segment cf-app-segment--alt">
                <div data-css-bui2vg="">
                  <h1 data-css-10hc4to="">Case notifications for <%=appeal.veteran_first_name%> <%=appeal.veteran_last_name%></h1>
                  <div data-css-7o0e0w="">
                    <div data-css-p21ib3="">Veteran ID:&nbsp;
                      <button type="submit" class="cf-apppeal-id" data-css-cjlnsd="" style="width: auto; white-space: nowrap;"><%=appeal.veteran_file_number%></button>
                    </div>
                  </div>
                </div>

                <div data-css-7v4y9j="" id="caseTitleDetailsSubheader">
                  <div data-css-1atuorp="">
                    <div data-css-1yy2eo1="">
                      <p>Docket Number</p>
                      <div>
                        <span data-css-1iid9v3="">
                          <span data-css-2moai0=""><%=docket_type.first.upcase%></span>
                          <%=appeal.docket_number%>
                        </span>
                      </div>
                    </div>
                    <div data-css-1yy2eo1="">
                      <p>Appeal Stream Type</p>
                      <div>
                        <span><%=appeal.type%></span>
                      </div>
                    </div>
                    <div data-css-1yy2eo1="">
                      <p>Hearing Type</p>
                      <div><%=hearing_type%></div>
                    </div>
                  </div>
                </div>

                <div data-css-48ja="">
                  <span>
                    <p class="notification-text">VA Notify sent these status notifications to the Appellant about their case.</p>
                  </span>
                  <div class="notification-table">
                    <div class="cf-table-wrapper">
                      <table id="case-table-description" class="usa-table-borderless undefined">
                        <thead>
                          <tr role="row">
                            <th aria-labelledby="header-eventType" role="columnheader" scope="col" >
                              <span data-css-9shxm7="" aria-label="Event">
                                <span id="header-eventType">Event</span>
                              </span>
                            </th>
                            <th aria-sort="ascending" aria-labelledby="header-eventDate" role="columnheader" scope="col" >
                              <span data-css-9shxm7="" aria-label="Notification Date">
                                <span id="header-eventDate">Notification Date</span>
                              </span>
                            </th>
                            <th aria-labelledby="header-notificationType" role="columnheader" scope="col" >
                              <span data-css-9shxm7="" aria-label="Notification Type">
                                <span id="header-notificationType">Notification Type</span>
                              </span>
                            </th>
                            <th aria-labelledby="header-recipientInformation" role="columnheader" scope="col" >
                              <span data-css-9shxm7="" aria-label="Recipient Information">
                                <span id="header-recipientInformation">Recipient Information</span>
                              </span>
                            </th>
                            <th aria-labelledby="header-status" role="columnheader" scope="col" >
                              <span data-css-9shxm7="" aria-label="Status">
                                <span id="header-status">Status</span>
                              </span>
                            </th>
                          </tr>
                        </thead>
                        <tbody >
                          <tr id="table-row-0" class="row-even top" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Appeal docketed</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/27/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-0a" class="row-even" role="row">
                            <td role="cell" colspan="5">
                              <span>This is the content of the email that was sent to the veteran for their Appeal Docketed notification.</span>
                            </td>
                          </tr>
                          <tr id="table-row-1" class="top" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Appeal docketed</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/27/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">555-555-5555</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-1a" role="row">
                            <td role="cell" colspan="5">
                              <span>This is the content of the text message that was sent to the veteran for their Appeal Docketed notification. This is the content of the text message that was sent to the veteran for their Appeal Docketed notification. This is the content of the text message that was sent to the veteran for their Appeal Docketed notification.</span>
                            </td>
                          </tr>
                          <tr id="table-row-2" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Hearing scheduled</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/28/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-3" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Hearing scheduled</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/28/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-4" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/29/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-5" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/29/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-6" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/30/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-7" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/30/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-8" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Withdrawal of hearing</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/01/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-9" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Withdrawal of hearing</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/01/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-10" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/02/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-11" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/02/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-12" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/03/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-13" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/03/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-14" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Appeal decision mailed</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/04/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>

                          <tr id="table-row-0" class="row-even top" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Appeal docketed</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/27/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-0a" class="row-even" role="row">
                            <td role="cell" colspan="5">
                              <span>This is the content of the email that was sent to the veteran for their Appeal Docketed notification.</span>
                            </td>
                          </tr>
                          <tr id="table-row-1" class="top" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Appeal docketed</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/27/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">555-555-5555</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-1a" role="row">
                            <td role="cell" colspan="5">
                              <span>This is the content of the text message that was sent to the veteran for their Appeal Docketed notification. This is the content of the text message that was sent to the veteran for their Appeal Docketed notification. This is the content of the text message that was sent to the veteran for their Appeal Docketed notification.</span>
                            </td>
                          </tr>
                          <tr id="table-row-2" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Hearing scheduled</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/28/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-3" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Hearing scheduled</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/28/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-4" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/29/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-5" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/29/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-6" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/30/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">example@example.com</td>
                            <td role="cell" colspan="1">Delivered</td>
                          </tr>
                          <tr id="table-row-7" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Privacy Act request complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">11/30/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-8" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Withdrawal of hearing</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/01/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-9" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Withdrawal of hearing</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/01/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Temporary-failure</td>
                          </tr>
                          <tr id="table-row-10" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/02/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-11" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP pending</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/02/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-12" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/03/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-13" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>VSO IHP complete</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/03/2022</td>
                            <td role="cell" colspan="1">Text</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>
                          <tr id="table-row-14" class="row-even" role="row">
                            <td role="cell" colspan="1">
                              <span>
                                <span style="font-weight: bold; cursor: pointer;">
                                  <a>Appeal decision mailed</a>
                                </span>
                              </span>
                            </td>
                            <td role="cell" colspan="1">12/04/2022</td>
                            <td role="cell" colspan="1">Email</td>
                            <td role="cell" colspan="1">—</td>
                            <td role="cell" colspan="1">Sent</td>
                          </tr>

                        </tbody>
                        <tfoot></tfoot>
                      </table>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </main>
      </div>
    </div>
  </body>

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>

  <style>
    .row-even {
      background-color: #f9f9f9;
    }

    td {
      background-color: inherit;
    }

    td a {
      color: inherit;
    }

    .top {
      border-bottom: hidden;
    }
  </style>

</html>

